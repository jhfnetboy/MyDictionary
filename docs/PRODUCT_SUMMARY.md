# MyDictionary - 产品设计总结

## 📋 项目概述

**MyDictionary** 是一款基于本地 AI 模型的 Chrome 插件,提供智能翻译、近义词推荐、例句展示和学术写作辅助功能。

---

## 🎯 核心功能

### 1. 双入口设计

#### 入口 1: 网页划词
- 用户在网页选中文本
- 显示翻译图标或右键菜单
- 点击后右侧滑入面板,自动填充文本并翻译

#### 入口 2: 点击插件图标
- 点击浏览器工具栏的插件图标
- 右侧滑入空白输入面板
- 用户手动输入文本进行翻译

### 2. 核心翻译功能
- **智能语言检测**: 自动识别中、英、日、韩、泰、俄、阿等 20+ 种语言
- **中英互译**: 使用专用高质量模型 (Helsinki-NLP/opus-mt)
- **多语言支持**: 通用模型支持 200 种语言互译 (NLLB-200)
- **混合模型策略**: 主要语言对使用专用模型,其他语言使用通用模型

### 3. 扩展功能
- **近义词推荐**: 基于上下文的同义词列表
- **例句展示**: 真实使用场景的 3-5 个例句
- **学术写作模式**:
  - 20,000+ 学术常用短语
  - 论文各部分专用表达 (Introduction → Conclusion)
  - 可选 SciBERT 学术模型 (440MB)

---

## 🤖 模型架构

### 混合模型策略

```
翻译请求
    ↓
检测语言对
    ↓
是否为主要语言对 (如: 英↔中)?
    ├─ 是 → 专用模型 (Helsinki-NLP/opus-mt)
    │         质量: ⭐⭐⭐⭐⭐
    │         功能: 翻译 + 近义词 + 例句
    └─ 否 → 通用模型 (NLLB-200)
              质量: ⭐⭐⭐⭐
              功能: 仅翻译
```

### 模型清单

| 模型 | 大小 | 用途 | 优先级 |
|------|------|------|--------|
| **专用翻译 (英→中)** | 300MB | 高质量英译中 | ⭐⭐⭐⭐⭐ 必需 |
| **专用翻译 (中→英)** | 300MB | 高质量中译英 | ⭐⭐⭐⭐⭐ 必需 |
| **通用翻译** | 600MB | 200 种语言互译 | ⭐⭐⭐⭐ 推荐 |
| **近义词模型** | 65MB | 英文近义词推荐 | ⭐⭐⭐⭐ 推荐 |
| **例句模型** | 23MB | 例句检索 | ⭐⭐⭐⭐ 推荐 |
| **学术短语库** | 8MB | 20,000+ 学术表达 | ⭐⭐⭐ 可选 |
| **SciBERT** | 440MB | 学术近义词(高级) | ⭐⭐ 可选 |

### 安装预设

#### 🥇 精简安装 (推荐) - 696MB
```
✅ 专用翻译 (英中双向) - 600MB
✅ 近义词 - 65MB
✅ 例句 - 23MB
✅ 学术短语库 - 8MB
```

#### 🏆 完整安装 - 1.78GB
```
✅ 专用翻译 - 600MB
✅ 通用翻译 - 600MB
✅ 近义词 - 65MB
✅ 例句 - 23MB
✅ 学术短语库 - 8MB
✅ SciBERT (可选) - 440MB
```

#### 🎓 学术写作专版 - 1.14GB
```
✅ 专用翻译 - 600MB
✅ 近义词 - 65MB
✅ 例句 - 23MB
✅ 学术短语库 - 8MB
✅ SciBERT - 440MB
```

#### 📦 最小安装 - 600MB
```
✅ 通用翻译 - 600MB
```

---

## 🎨 用户界面

### 侧边栏面板 (右侧滑入,宽度 400px)

#### 模式 1: 通用翻译
```
┌─────────────────────────────────────┐
│  ✕  MyDictionary                🌙 │
│  模式: [🌐 通用翻译 | 🎓 学术写作]   │
├─────────────────────────────────────┤
│  从 🇺🇸 English (已检测)             │
│  ┌───────────────────────────────┐ │
│  │ artificial intelligence       │ │
│  └───────────────────────────────┘ │
│                                     │
│  翻译为 🇨🇳 中文                     │
│  ┌───────────────────────────────┐ │
│  │ 人工智能                       │ │
│  └───────────────────────────────┘ │
│                                     │
│  📝 上下文                           │
│  "The rapid development of AI..."   │
│                                     │
│  ─────────────────────────────────  │
│  [📚 近义词]    [💬 例句]            │
│                                     │
│  ✨ 使用专用高质量模型翻译            │
└─────────────────────────────────────┘
```

#### 模式 2: 学术写作
```
┌─────────────────────────────────────┐
│  ✕  MyDictionary                🌙 │
│  模式: [🌐 通用翻译 | 🎓 学术写作]   │
├─────────────────────────────────────┤
│  输入词汇:                           │
│  ┌───────────────────────────────┐ │
│  │ examine                       │ │
│  └───────────────────────────────┘ │
│                                     │
│  翻译: 检查、审查、研究              │
│                                     │
│  ─────────────────────────────────  │
│  [📚 学术近义词]  [💬 学术例句]      │
│  [📖 学术短语库]                     │
│                                     │
│  📖 论文部分:                        │
│  [Introduction] [Methods] [Results] │
│  [Discussion] [Conclusion]          │
│                                     │
└─────────────────────────────────────┘
```

### 语言选择器
```
┌─────────────────────────────┐
│  翻译为                      │
│  ┌─────────────────────────┐│
│  │ 🔍 搜索语言...          ││
│  ├─────────────────────────┤│
│  │ 常用语言                ││
│  │ 🇨🇳 中文    🇺🇸 English ││
│  │ 🇯🇵 日本語  🇰🇷 한국어  ││
│  │ 🇫🇷 Français 🇩🇪 Deutsch││
│  │ 🇪🇸 Español 🇹🇭 ไทย    ││
│  │ ─────────────────────  ││
│  │ 更多语言 (192+) ▼       ││
│  └─────────────────────────┘│
└─────────────────────────────┘
```

---

## 🔄 用户交互流程

### 流程 1: 快速翻译
```
选中网页文本
    ↓
显示翻译图标
    ↓
点击图标
    ↓
侧边栏滑入 + 自动显示翻译
    ↓
[可选] 点击 [近义词] 或 [例句] 查看更多
```

### 流程 2: 手动输入翻译
```
点击浏览器工具栏插件图标
    ↓
侧边栏滑入 (空白输入模式)
    ↓
输入文本 + 选择目标语言
    ↓
点击 [翻译] 按钮
    ↓
显示翻译结果
```

### 流程 3: 学术写作辅助
```
切换到 "学术写作" 模式
    ↓
输入词汇 (如 "examine")
    ↓
显示翻译 + 学术同义词推荐
    ↓
点击 [学术短语库]
    ↓
选择论文部分 (如 Introduction)
    ↓
浏览 20,000+ 学术常用表达
    ↓
复制需要的短语到论文中
```

---

## 🛠️ 技术栈

| 层级 | 技术 |
|------|------|
| **前端框架** | Chrome Extension Manifest V3 |
| **AI 库** | Transformers.js (@xenova/transformers) |
| **翻译模型** | Helsinki-NLP/opus-mt + NLLB-200 |
| **近义词模型** | DistilBERT |
| **例句模型** | all-MiniLM-L6-v2 |
| **学术模型** | SciBERT (可选) + Academic Phrasebank |
| **语言检测** | 正则表达式 + Unicode 范围 |
| **存储** | chrome.storage.local |

---

## 📊 性能指标

| 指标 | 目标 |
|------|------|
| **模型加载时间** | < 3 秒 (首次) / < 500ms (缓存) |
| **翻译延迟** | < 1 秒 (专用模型) / < 1.5 秒 (通用模型) |
| **内存占用** | < 300MB (所有模型加载后) |
| **UI 响应** | < 100ms (侧边栏滑入动画) |

---

## 🎯 核心优势

### 1. 完全本地化
✅ 所有 AI 推理在本地完成
✅ 无需联网,保护用户隐私
✅ 无数据上传,安全可靠

### 2. 智能模型路由
✅ 主要语言对使用专用高质量模型
✅ 其他语言自动降级到通用模型
✅ 平衡质量与体积

### 3. 学术写作专版
✅ 20,000+ 学术常用表达
✅ 涵盖论文所有部分
✅ 可选 SciBERT 专业模型

### 4. 灵活的安装选项
✅ 4 种安装预设 (精简/完整/学术/最小)
✅ 用户可自定义主要语言对
✅ 按需下载扩展模型

---

## 📂 项目结构

```
MyDictionary/
├── manifest.json           # 插件配置
├── package.json            # 依赖管理
├── background.js           # Service Worker (模型加载和推理)
├── content.js              # Content Script (UI 管理)
├── src/
│   ├── config/
│   │   └── models-config.json  # 模型配置文件
│   ├── utils/
│   │   ├── languageDetector.js  # 语言检测
│   │   ├── modelRouter.js       # 模型路由
│   │   └── academicPhrasebank.js # 学术短语库
│   └── ui/
│       ├── sidebar.html     # 侧边栏
│       ├── sidebar.css      # 样式
│       └── sidebar.js       # 交互逻辑
├── assets/
│   ├── academic-phrasebank.json  # 学术短语数据
│   └── icons/               # 插件图标
└── docs/
    ├── DESIGN.md            # 产品设计文档
    ├── CLAUDE.md            # 技术架构指南
    ├── UI_WIREFRAME.md      # UI 设计稿
    ├── MODEL_STRATEGY.md    # 单模型策略
    ├── HYBRID_MODEL_STRATEGY.md  # 混合模型策略
    ├── ACADEMIC_WRITING_MODELS.md # 学术写作模型
    └── PRODUCT_SUMMARY.md   # 产品总结 (本文档)
```

---

## 🚀 开发路线图

### Phase 1: MVP (2-3 周)
- [x] 产品设计和架构设计
- [ ] 基础翻译功能 (专用模型 + 通用模型)
- [ ] 侧边栏 UI 实现
- [ ] 语言自动检测
- [ ] 网页划词入口

### Phase 2: 扩展功能 (1-2 周)
- [ ] 近义词推荐
- [ ] 例句展示
- [ ] 学术短语库集成
- [ ] 点击插件图标入口

### Phase 3: 优化与发布 (1 周)
- [ ] 性能优化
- [ ] UI/UX 打磨
- [ ] 错误处理
- [ ] Chrome Web Store 发布

---

## 📝 相关文档

| 文档 | 描述 |
|------|------|
| [DESIGN.md](./DESIGN.md) | 详细的产品设计和功能规格 |
| [CLAUDE.md](./CLAUDE.md) | 技术架构和开发指南 |
| [UI_WIREFRAME.md](./UI_WIREFRAME.md) | 完整的 UI 设计稿和样式规范 |
| [HYBRID_MODEL_STRATEGY.md](./HYBRID_MODEL_STRATEGY.md) | 混合模型策略详细设计 |
| [ACADEMIC_WRITING_MODELS.md](./ACADEMIC_WRITING_MODELS.md) | 学术写作模型调研和设计 |
| [models-config.json](./src/config/models-config.json) | 模型配置文件 |

---

## 🎓 下一步行动

1. **初始化项目**: 创建 `manifest.json` 和 `package.json`
2. **安装依赖**: `pnpm install @xenova/transformers`
3. **实现模型管理器**: 智能路由逻辑
4. **构建侧边栏 UI**: HTML/CSS/JS
5. **集成 Transformers.js**: 加载和调用模型
6. **测试完整流程**: 端到端测试

---

**设计完成时间**: 2025-11-29
**当前状态**: ✅ 设计阶段完成,等待开发实现

---

## 💡 关键设计决策

### 1. 为什么使用混合模型策略?
- ✅ 平衡翻译质量和模型体积
- ✅ 主要语言对获得最佳质量 (⭐⭐⭐⭐⭐)
- ✅ 其他语言也能正常使用 (⭐⭐⭐⭐)

### 2. 为什么添加学术写作功能?
- ✅ 目标用户群明确 (研究生、学者)
- ✅ 高价值需求 (提升论文写作质量)
- ✅ 差异化竞争优势 (竞品缺乏此功能)

### 3. 为什么选择 Academic Phrasebank?
- ✅ 真实学术论文提取,质量有保证
- ✅ 数据量大 (20,000+ 短语)
- ✅ 体积小 (8MB),性价比高

### 4. 为什么 SciBERT 设为可选?
- ✅ 体积较大 (440MB)
- ✅ 需要转换为 ONNX (技术门槛)
- ✅ Academic Phrasebank 已能满足大部分需求
